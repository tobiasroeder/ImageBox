/* ImageBox v1.3.2 |https://github.com/tobiasroeder/ImageBox */var a={galleryNames:[],galleries:[],settings:{info:!1,swipeToChange:!0,swipeToClose:!0,keyControls:!0,closeEverywhere:!0,htmlCaption:!1,autoInit:!0},init(A=''){if(!this.settings.autoInit&&A=='autoload')return;this.settings.info&&console.log('%cImageBox v1.3.2\nhttps://tobiasroeder.github.io/imagebox','color:#39c');this.settings.keyControls&&(window.onkeyup=_=>{if(!document.body.classList.contains('imagebox'))return;switch(_.code) {case 'Escape':this.close();break;case 'ArrowLeft':{let b=document.querySelector('.ib-control-left');if(b&&!b.hasAttribute('disabled'))b.click()}break;case 'ArrowRight':{let B=document.querySelector('.ib-control-right');if(B&&!B.hasAttribute('disabled'))B.click()}break}});this.finder()},finder(){let c=document.querySelectorAll('img[data-imagebox]');this.galleries.length>0&&(this.galleries=[]);for(const C of c){let _a=C.dataset.imagebox;C.addEventListener('click',function(d){d.preventDefault();d.stopPropagation();a.open(this)});if(_a=='')continue;!a.galleryNames.includes(_a)&&a.galleryNames.push(_a)}for(const D of a.galleryNames)a.galleries.push(document.querySelectorAll(`[data-imagebox="${D}"]`));for(const[_A,_b] of a.galleries.entries())for(const[e,_B] of _b.entries()){_B.setAttribute('data-imagebox-image-index',e);_B.setAttribute('data-imagebox-gallery-index',_A)}},options({info:E=!1,swipeToChange:aA=!0,swipeToClose:_c=!0,keyControls:_d=!0,closeEverywhere:_e=!0,htmlCaption:f=!1,autoInit:g=!0}){this.settings.info=E;this.settings.swipeToChange=aA;this.settings.swipeToClose=_c;this.settings.keyControls=_d;this.settings.closeEverywhere=_e;this.settings.htmlCaption=f;this.settings.autoInit=g},open:aB=>{let aC=!0;let _C=aB.dataset.imagebox;_C=='image'||_C==''&&(aC=!1);let _D=null;document.body.classList.add('imagebox');if(document.querySelector('#imagebox')==null){let aD=document.createElement('div');aD.setAttribute('id','imagebox');aD.setAttribute('class','ib-remove');document.body.appendChild(aD)}_D=aB.dataset.imageboxSrc??aB.src;let _E=document.querySelector('#imagebox');let F=null;let G=null;let h=null;let i=null;let j=null;let k=null;let l='';let m='';aC&&(i=parseInt(aB.dataset.imageboxImageIndex),j=parseInt(aB.dataset.imageboxGalleryIndex),k=a.galleries[j].length,!i&&(l='disabled'),i==k-1&&(m='disabled'),F=`<div class="ib-control"> <div class="ib-control-left" ${l}></div> <div class="ib-control-right" ${m}></div> </div>`,G=`<div class="ib-indexes"> <span class="ib-current-index">${i+1}</span> / <span class="ib-last-index">${k}</span> </div>`,h='<img src="" class="ib-image ib-image-next ib-hidden">');_E.innerHTML=`<div class="ib-loading"></div> <div class="ib-content"> <div class="ib-topbar">${G} <div class="ib-buttons"> <div class="ib-close ib-button"></div> </div> </div> ${F} <div class="ib-image-wrapper"> <img src="${_D}" class="ib-image ib-image-current"> ${h} </div> <div class="ib-caption"></div> </div>`;if(aC){_E.querySelector('.ib-control-left').addEventListener('click',aE=>{aE.preventDefault();aE.stopPropagation();a.prev(i--,j)});_E.querySelector('.ib-control-right').addEventListener('click',aF=>{aF.preventDefault();aF.stopPropagation();a.next(i++,j)})}else a.settings.closeEverywhere&&_E.querySelector('.ib-content').addEventListener('click',()=>a.close());_E.querySelector('.ib-close').addEventListener('click',()=>a.close());a.caption(aB);a.fade.in(_E);document.querySelector('#imagebox .ib-image').onload=()=>{document.querySelector('#imagebox .ib-loading').style.opacity='0';document.querySelector('#imagebox .ib-image-wrapper').style.opacity='1'};a.swipe(document.querySelector('#imagebox .ib-content'),aC)},close:()=>{document.body.classList.remove('imagebox');let aG=document.querySelector('#imagebox');aG.classList.remove('ib-remove');a.fade.out(aG)},change:(aH,aI,aJ)=>{console.info('change method executed');let aK=document.querySelector('#imagebox .ib-loading');let aL=a.galleries[aI].length;let _f=document.querySelector(`img[data-imagebox-image-index='${aH}'][data-imagebox-gallery-index='${aI}']`);let _g=document.querySelector('#imagebox .ib-control-left');let H=document.querySelector('#imagebox .ib-control-right');let I=document.querySelector('#imagebox .ib-current-index');aK.style.opacity='1';aJ=='prev'&&(!aH&&_g.setAttribute('disabled',''),H.removeAttribute('disabled'));aJ=='next'&&(aH==aL-1&&H.setAttribute('disabled',''),_g.removeAttribute('disabled'));I.innerText=aH+1;let J=document.querySelector('#imagebox .ib-image-next');let K=document.querySelector('#imagebox .ib-image-current');K.classList.add('ibFadeOut');J.src=_f.dataset.imageboxSrc??_f.src;a.caption(_f);J.onload=()=>{J.classList.add('ibFadeIn');aK.style.opacity=0;setTimeout(()=>{K.className='ib-image ib-hidden ib-image-next';K.src='';J.className='ib-image ib-image-current'},600)}},prev:(aM,aN)=>{if(!aM)return;aM<=0?aM=0:aM--;a.change(aM,aN,'prev')},next:(aO,aP)=>{let aQ=a.galleries[aP].length-1;if(aO==aQ)return;aO>=aQ?aO=aQ:aO++;a.change(aO,aP,'next')},caption(aR){let aS=aR.getAttribute('data-imagebox-caption');let aT=document.querySelector('#imagebox .ib-caption');this.settings.htmlCaption?aT.innerHTML=aS:aT.textContent=aS;if(aS){aS.indexOf('{loc}')>-1?(aT.classList.add('location'),aS=aS.replace('{loc}',''),aT.textContent=aS):(aT.classList.remove('location'));aT.style.display='block'}else aT.style.display='none'},swipe:(aU,aV)=>{if(!aU)return;aU.ontouchstart=aW=>{let aX=aW.layerX;let aY=aW.layerY;aU.ontouchend=aZ=>{let bA=aZ.layerX,bB=aX-bA,bC=aZ.layerY,bD=aY-bC,_F=window.innerWidth/10,_G=window.innerHeight/10;a.settings.swipeToClose&&bD>=_G||bD<=-_G&&a.close();aV&&a.settings.swipeToChange&&(bB>=_F&&document.querySelector('#imagebox .ib-control-right').click(),bB<=-_F&&document.querySelector('#imagebox .ib-control-left').click())}}},fade:{duration:0.1,out:(bE,bF=!1,bG)=>{bE.style.opacity=1;(function bH(){let bI=parseFloat(bE.style.opacity);!((bI-=a.fade.duration)<0)?(bE.style.opacity=bI,requestAnimationFrame(bH)):(bG&&bG(),bF&&document.querySelector('#imagebox .ib-image-wrapper').removeChild(bE),bE.style.display='none')})()},in:(bJ,bK)=>{bJ.style.opacity=0;bJ.style.display='block';(function bL(){let bM=parseFloat(bJ.style.opacity);if(!((bM+=a.fade.duration)>1)){bJ.style.opacity=bM;requestAnimationFrame(bL)}else bK&&bK()})()}}};window.addEventListener('load',function(){a.init('autoload')});
